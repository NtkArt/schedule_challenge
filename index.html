<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Agenda Telefonica</title>

    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
  </head>
  <body>
    <div id="main" class="container-fluid">
      <div id="top" class="row">
        <div class="col-sm-3">
          <h2 class="text-center">Agenda</h2>
        </div>
        <div class="col-sm-3 d-flex justify-content-end">
          <a href="add.html" class="btn btn-primary pull-right h2">Novo Item</a>
        </div>
      </div>

      <hr />
      <div id="list" class="row">
        <div class="table-responsive col-md-12">
          <table
            id="usersList"
            class="table table-striped"
            cellspacing="0"
            cellpadding="0"
          >
            <thead class="table-dark">
              <tr>
                <th>Nome</th>
                <th>Telefone</th>
                <th>Email</th>
                <th class="actions">Ações</th>
                <a href="asd" onclick=""></a>
              </tr>
            </thead>
            <tbody class="table-content">
              <script>
                const emails = JSON.parse(sessionStorage.getItem('email'));
                const tels = JSON.parse(sessionStorage.getItem('tel'));
                const names = JSON.parse(sessionStorage.getItem('name'));

                if (emails !== null) {
                  emails.forEach((email, index) => {
                    var tr = document.createElement('tr');
                    if (
                      names[index] === undefined ||
                      names[index].length <= 0
                    ) {
                      $(tr).append(`<td style="display:none;" ></td>`);
                    } else {
                      $(tr).append(`<td id="name">${names[index]}</td>`);
                      $(tr).append(`<td id="tel">${tels[index]}</td>`);
                      $(tr).append(`<td id="email">${email}</td>`);
                      $(tr).append(`<td class="actions">
                        <a class="btn btn-warning btn-xs" onclick="alert('Funcao ainda nao implementada. Desculpe')">Editar</a>
                        <a
                        class="btn btn-danger btn-xs"
                        data-toggle="modal"
                        data-target="#delete-modal"
                        onclick="deleteUser(${index})"
                        >Excluir</a
                        >
                        </td>`);
                    }

                    $('.table-content').append(tr);
                  });
                } else {
                  $('.table-content').append(
                    `<h3>Nao existe nenhuma data no Session Storage. Por favor crie um novo usuario</h3>`,
                  );
                }
              </script>
            </tbody>
          </table>
        </div>
      </div>
      <!-- /#list -->

      <!-- /#bottom -->
    </div>
    <!-- /#main -->

    <!-- Modal -->
    <div
      class="modal fade"
      id="delete-modal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="modalLabel"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Fechar"
            >
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title" id="modalLabel">Excluir Item da Agenda</h4>
          </div>
          <div class="modal-body">
            Deseja realmente excluir este item da agenda?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary">Sim</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Nao
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
